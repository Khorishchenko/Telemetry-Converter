# Telemetry-Converter
# –ü—Ä–æ—î–∫—Ç: –¢–µ–ª–µ–º–µ—Ç—Ä—ñ—è-–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä (MSP-MAVLink Bridge) üöÅ

–¶–µ–π –ø—Ä–æ—î–∫—Ç ‚Äî —Ü–µ **C++ –ø—Ä–æ–≥—Ä–∞–º–∞**, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –¥–ª—è **Raspberry Pi Zero**, —â–æ —Å–ª—É–∂–∏—Ç—å —à–ª—é–∑–æ–º –º—ñ–∂ –¥–≤–æ–º–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏ —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó: **MSP (MultiWii Serial Protocol)** —ñ **MAVLink**.

### –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è

–ü—Ä–æ–≥—Ä–∞–º–∞ –∑—á–∏—Ç—É—î —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—á–Ω—ñ –¥–∞–Ω—ñ –∑ –ø–æ–ª—å–æ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Betaflight) —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å UART. –û—Ç—Ä–∏–º–∞–Ω—ñ –¥–∞–Ω—ñ –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ MSP **–ø–∞—Ä—Å—è—Ç—å—Å—è** —Ç–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –≤ –ø–∞–∫–µ—Ç–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—É MAVLink, —â–æ —î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –¥–ª—è –±–∞–≥–∞—Ç—å–æ—Ö —Å–∏—Å—Ç–µ–º –∫–µ—Ä—É–≤–∞–Ω–Ω—è –±–µ–∑–ø—ñ–ª–æ—Ç–Ω–∏–º–∏ –∞–ø–∞—Ä–∞—Ç–∞–º–∏ —Ç–∞ –Ω–∞–∑–µ–º–Ω–∏–º–∏ —Å—Ç–∞–Ω—Ü—ñ—è–º–∏.
  * **–ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö**: –ü—Ä–æ–≥—Ä–∞–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏—Ç—è–≥—É—î —á–∏—Å–ª–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è (–Ω–∞–ø—Ä—É–≥—É, —Å—Ç—Ä—É–º, –∫–∞–Ω–∞–ª–∏) –∑ MSP-–ø–∞–∫–µ—Ç–∞ —Ç–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —ó—Ö —É —Ñ–æ—Ä–º–∞—Ç, –ø—Ä–∏–¥–∞—Ç–Ω–∏–π –¥–ª—è MAVLink.
  * **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è MAVLink-–ø–∞–∫–µ—Ç—ñ–≤**: –ü—Ä–æ–≥—Ä–∞–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ü—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è MAVLink-–ø–∞–∫–µ—Ç—ñ–≤, —Ç–∞–∫–∏—Ö —è–∫ `BATTERY_STATUS` —ñ `RC_CHANNELS`.
  * **–í–∏–≤–µ–¥–µ–Ω–Ω—è HEX-—Ñ–æ—Ä–º–∞—Ç—É**: –î–ª—è –≤—ñ–∑—É–∞–ª—å–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, –ø—Ä–æ–≥—Ä–∞–º–∞ –≤–∏–≤–æ–¥–∏—Ç—å –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ MAVLink-–ø–∞–∫–µ—Ç–∏ —É —à—ñ—Å—Ç–Ω–∞–¥—Ü—è—Ç–∫–æ–≤–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ, —â–æ –¥–æ–∑–≤–æ–ª—è—î –ª–µ–≥–∫–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ó—Ö–Ω—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
  * **–í–∏–≤–µ–¥–µ–Ω–Ω—è UDP**: –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –ø–∞–∫–µ—Ç–∏ MAVLink –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –º–µ—Ä–µ–∂–µ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å UDP –Ω–∞ –∞–¥—Ä–µ—Å—É 127.0.0.1:14550

-----


### –ê–Ω–∞–ª—ñ–∑ –†–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ üìä

–¶–µ–π –ø—Ä–æ—î–∫—Ç –º—ñ—Å—Ç–∏—Ç—å –¥–≤—ñ –≤–µ—Ä—Å—ñ—ó –ø—Ä–æ–≥—Ä–∞–º–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—î—é –Ω–∞ Raspberry Pi: **TelemetryConverter_Serial** —Ç–∞ **TelemetryConverter_File**. 
–ü–µ—Ä—à–∞ –≤–µ—Ä—Å—ñ—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è, –∑—á–∏—Ç—É—é—á–∏ –¥–∞–Ω—ñ –∑ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ –ø–æ—Ä—Ç—É (/dev/serial0) –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –æ–±—Ä–æ–±–∫–∏, —Ç–æ–¥—ñ —è–∫ –¥—Ä—É–≥–∞ –≤–µ—Ä—Å—ñ—è —Å–ª—É–∂–∏—Ç—å –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É, –æ—Ç—Ä–∏–º—É—é—á–∏ –¥–∞–Ω—ñ –∑ —Ñ–∞–π–ª—É.


-----



###  –ü—Ä–æ–≥—Ä–∞–º–∞ TelemetryConverter_Serial:
–¶–µ–π –ø—Ä–æ—î–∫—Ç –º—ñ—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É `TelemetryConverter_Serial`, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω—É –¥–ª—è Raspberry Pi. –á—ó –æ—Å–Ω–æ–≤–Ω–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è ‚Äî –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–≤'—è–∑–∫—É –∑ –ø–æ–ª—å–æ—Ç–Ω–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–æ–º, –∑—á–∏—Ç—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó —Ç–∞ —ó—Ö –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è.


### **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏**

–ü—Ä–æ–≥—Ä–∞–º–∞ `TelemetryConverter_Serial` –∑—á–∏—Ç—É—î —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—á–Ω—ñ –¥–∞–Ω—ñ –∑ –ø–æ–ª—å–æ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Betaflight) —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å UART. 

-----

### **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫** üöÄ

–î–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏ —ó—ó –Ω–∞ Raspberry Pi. –ù–∏–∂—á–µ –Ω–∞–≤–µ–¥–µ–Ω–æ –ø–æ–∫—Ä–æ–∫–æ–≤—É —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é.

1.  **–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:**

    ```bash
    git clone https://github.com/Khorishchenko/Telemetry-Converter.git
    cd Telemetry-Converter
    ```

2.  **–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ MAVLink:**
    –û—Å–∫—ñ–ª—å–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É MAVLink, –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –∑–∞–≥–æ–ª–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ. –î–ª—è —Å–ø—Ä–æ—â–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É, –∑–∞–º—ñ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó, –º–æ–∂–Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≥–æ—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏:

    ```bash
    git clone https://github.com/mavlink/c_library_v2.git
    mv mavlink-c mavlink
    ```

3.  **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—è:**
    –°—Ç–≤–æ—Ä—ñ—Ç—å –ø–∞–ø–∫—É –¥–ª—è –∑–±—ñ—Ä–∫–∏ —Ç–∞ —Å–∫–æ–º–ø—ñ–ª—é–π—Ç–µ –ø—Ä–æ—î–∫—Ç –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é CMake:

    ```bash
    mkdir build
    cd build
    cmake ..
    make
    ```

4.  **–ó–∞–ø—É—Å–∫:**
    –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó –≤–∏ –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É:

    ```bash
    ./TelemetryConverter_Serial
    ```




-----


###  –ü—Ä–æ–≥—Ä–∞–º–∞ TelemetryConverter_File:
  * **–ü–∞—Ä—Å–∏–Ω–≥ MSP-–¥–∞–Ω–∏—Ö**: –ü—Ä–æ–≥—Ä–∞–º–∞ —É—Å–ø—ñ—à–Ω–æ –∑—á–∏—Ç—É—î –±—ñ–Ω–∞—Ä–Ω—ñ —Ñ–∞–π–ª–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `battery.bin`, `rc.bin`) —Ç–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞—î –∑–∞–≥–æ–ª–æ–≤–∫–∏, –¥–æ–≤–∂–∏–Ω—É —Ç–∞ —Ç–∏–ø–∏ –ø–∞–∫–µ—Ç—ñ–≤.

–í—Å—ñ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ MAVLink-–ø–∞–∫–µ—Ç–∏ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —É —Ñ–∞–π–ª `msp_telemetry.bin`. –ö–æ–∂–µ–Ω –Ω–æ–≤–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–∏ –¥–æ–¥–∞—î –¥–∞–Ω—ñ –¥–æ —Ü—å–æ–≥–æ —Ñ–∞–π–ª—É.


### –ó–∞–ø—É—Å–∫ –ü—Ä–æ–≥—Ä–∞–º–∏ üöÄ

–©–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É, —Å–ø–µ—Ä—à—É —Å–∫–æ–º–ø—ñ–ª—é–π—Ç–µ —ó—ó. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ç–µ—Ä–º—ñ–Ω–∞–ª, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –ø–∞–ø–∫–∏ `build` —ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:

```bash
cd build
cmake ..
make
```

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó, –∑–∞–ø—É—Å—Ç—ñ—Ç—å –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–π —Ñ–∞–π–ª `TelemetryConverter_File`, –≤–∫–∞–∑–∞–≤—à–∏ —à–ª—è—Ö –¥–æ –±—ñ–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª—É –∑ MSP-–¥–∞–Ω–∏–º–∏ —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç.

```bash
./TelemetryConverter_File [—à–ª—è—Ö_–¥–æ_—Ñ–∞–π–ª—É_–∑_–¥–∞–Ω–∏–º–∏]
```

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —Ñ–∞–π–ª `test.bin` –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —É –±–∞—Ç—å–∫—ñ–≤—Å—å–∫—ñ–π –ø–∞–ø—Ü—ñ –ø—Ä–æ—î–∫—Ç—É (`../`), –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ —Ç–∞–∫–æ—é:

```bash
./TelemetryConverter_File ../test.bin
```

–ü—Ä–æ–≥—Ä–∞–º–∞ –∑—á–∏—Ç—É—î –≤—Ö—ñ–¥–Ω–∏–π —Ñ–∞–π–ª, –ø–∞—Ä—Å–∏—Ç—å –π–æ–≥–æ –≤–º—ñ—Å—Ç, –∫–æ–Ω–≤–µ—Ä—Ç—É—î MSP-–¥–∞–Ω—ñ —É —Ñ–æ—Ä–º–∞—Ç MAVLink —Ç–∞ –∑–∞–ø–∏—Å—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —É —Ñ–∞–π–ª `msp_telemetry.bin`.

-----

### –ê—Ä–≥—É–º–µ–Ω—Ç–∏ –ö–æ–º–∞–Ω–¥–Ω–æ–≥–æ –†—è–¥–∫–∞

–ü—Ä–æ–≥—Ä–∞–º–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î –æ–¥–∏–Ω –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç:

  * `[—à–ª—è—Ö_–¥–æ_—Ñ–∞–π–ª—É_–∑_–¥–∞–Ω–∏–º–∏]`: –®–ª—è—Ö –¥–æ –±—ñ–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª—É, —â–æ –º—ñ—Å—Ç–∏—Ç—å MSP-–ø–∞–∫–µ—Ç–∏.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–¥–∏–Ω –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤:

  * `../attitude.bin`: –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ –ø—Ä–æ –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—é (`MSP_ATTITUDE`).
  * `../rc.bin`: –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ –∫–∞–Ω–∞–ª—ñ–≤ –∫–µ—Ä—É–≤–∞–Ω–Ω—è (`MSP_RC`).
  * `../battery.bin`: –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ –±–∞—Ç–∞—Ä–µ—ó (`MSP_BATTERY_STATUS`).
  * `../gps.bin`: –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ GPS (`MSP_RAW_GPS`).

–ö–æ–∂–µ–Ω –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–∏ –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º —Ñ–∞–π–ª–æ–º **–¥–æ–¥–∞–≤–∞—Ç–∏–º–µ** –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π MAVLink-–ø–∞–∫–µ—Ç –¥–æ —Ñ–∞–π–ª—É `msp_telemetry.bin`, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –≤–∞–º —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –ø–æ–≤–Ω–∏–π –ª–æ–≥ —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó.